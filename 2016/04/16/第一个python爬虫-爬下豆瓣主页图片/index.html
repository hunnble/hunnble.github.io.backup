<!DOCTYPE html>
<html lang="zh-Hans">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="ç—›è‹¦å¦‚æ­¤æŒä¹…ï¼Œåƒèœ—ç‰›å……æ»¡è€å¿ƒåœ°ç§»åŠ¨ï¼›å¿«ä¹å¦‚æ­¤çŸ­æš‚ï¼Œåƒå…”å­çš„å°¾å·´æ è¿‡ç§‹å¤©çš„è‰åŸ">
    

    <!--Author-->
    
        <meta name="author" content="Noski">
    

    <!-- Title -->
    
    <title>ç¬¬ä¸€ä¸ªpythonçˆ¬è™«:çˆ¬ä¸‹è±†ç“£ä¸»é¡µå›¾ç‰‡ | åŒ—æ–¹å…¬å›­</title>

    <!-- Bootstrap Core CSS -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Custom Fonts -->
    <link href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

    <!-- Content -->
    <section class="article-container">
<!-- Back Home -->
<a class="nav-back" href="/">
    <i class="fa fa-puzzle-piece"></i>
</a>

<!-- Page Header -->
<header class="intro-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>ç¬¬ä¸€ä¸ªpythonçˆ¬è™«:çˆ¬ä¸‹è±†ç“£ä¸»é¡µå›¾ç‰‡</h1>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <!-- Post Main Content -->
            <div class="post-content col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>å­¦è€Œæ—¶æˆä¹‹~~~<br>æ—©å°±å¬è¯´pythonå¾ˆå¥½ç©,ä¹Ÿæ—©å°±å¬è¯´pythonå¾ˆå¥½ç©,æ‰€ä»¥å°±ç”¨å¥½ç©çš„è¯­è¨€å†™å¥½ç©çš„ä¸œè¥¿ã€‚<br>ä½¿ç”¨çš„ç‰ˆæœ¬3.5ã€‚æ‰€ä»¥å¾ˆå¤šå¾ˆå¥½çš„2.7ç‰ˆæœ¬æ•™ç¨‹ä¸é€‚ç”¨äº†ã€‚</p>
<a id="more"></a>
<p>ä»£ç ä¸é•¿,åˆ†ä¸ºå‡ ä¸ªåŠŸèƒ½:</p>
<h3 id="é¦–å…ˆå½“ç„¶æ˜¯å†™ç…§é¡¾linux-å®šä¹‰ç¼–ç æ ¼å¼å’Œå¯¼å…¥ä¾èµ–æ¨¡å—"><a href="#é¦–å…ˆå½“ç„¶æ˜¯å†™ç…§é¡¾linux-å®šä¹‰ç¼–ç æ ¼å¼å’Œå¯¼å…¥ä¾èµ–æ¨¡å—" class="headerlink" title="é¦–å…ˆå½“ç„¶æ˜¯å†™ç…§é¡¾linux,å®šä¹‰ç¼–ç æ ¼å¼å’Œå¯¼å…¥ä¾èµ–æ¨¡å—"></a>é¦–å…ˆå½“ç„¶æ˜¯å†™ç…§é¡¾linux,å®šä¹‰ç¼–ç æ ¼å¼å’Œå¯¼å…¥ä¾èµ–æ¨¡å—</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env/python</span></div><div class="line"><span class="comment">#-*-encoding: utf-8-*-</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> urllib.request</div><div class="line"><span class="keyword">import</span> socket</div><div class="line"><span class="keyword">import</span> re</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> os</div></pre></td></tr></table></figure>
<h3 id="æŠŠæºç å†™å…¥æ–‡ä»¶-è¿™ä¸ªå°±æ˜¯çˆ¬ä¸‹æ¥é¡µé¢çœ‹ä¸€çœ‹-è±†ç“£ä¸»é¡µæœ‰ä¸¤åƒä¸€ç™¾å¤šè¡Œ"><a href="#æŠŠæºç å†™å…¥æ–‡ä»¶-è¿™ä¸ªå°±æ˜¯çˆ¬ä¸‹æ¥é¡µé¢çœ‹ä¸€çœ‹-è±†ç“£ä¸»é¡µæœ‰ä¸¤åƒä¸€ç™¾å¤šè¡Œ" class="headerlink" title="æŠŠæºç å†™å…¥æ–‡ä»¶,è¿™ä¸ªå°±æ˜¯çˆ¬ä¸‹æ¥é¡µé¢çœ‹ä¸€çœ‹,è±†ç“£ä¸»é¡µæœ‰ä¸¤åƒä¸€ç™¾å¤šè¡Œ~"></a>æŠŠæºç å†™å…¥æ–‡ä»¶,è¿™ä¸ªå°±æ˜¯çˆ¬ä¸‹æ¥é¡µé¢çœ‹ä¸€çœ‹,è±†ç“£ä¸»é¡µæœ‰ä¸¤åƒä¸€ç™¾å¤šè¡Œ~</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveFile</span><span class="params">(data)</span>:</span></div><div class="line">    save_path = <span class="string">'D:/temp.out'</span></div><div class="line">    f_obj = open(save_path, <span class="string">'wb'</span>)</div><div class="line">    f_obj.write(data)</div><div class="line">    f_obj.close()</div></pre></td></tr></table></figure>
<h3 id="ä¸ºå›¾ç‰‡æŒ‡å®šè¾“å‡ºç›®å½•"><a href="#ä¸ºå›¾ç‰‡æŒ‡å®šè¾“å‡ºç›®å½•" class="headerlink" title="ä¸ºå›¾ç‰‡æŒ‡å®šè¾“å‡ºç›®å½•"></a>ä¸ºå›¾ç‰‡æŒ‡å®šè¾“å‡ºç›®å½•</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">targetDir = <span class="string">r'D:/spiderImg'</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">destFile</span><span class="params">(path)</span>:</span></div><div class="line"><span class="comment"># å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨å°±åˆ›å»ºä¸€ä¸ª</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(targetDir):</div><div class="line">    os.mkdir(targetDir)</div><div class="line">pos = path.rindex(<span class="string">'/'</span>)</div><div class="line">t = os.path.join(targetDir, path[pos+<span class="number">1</span>:])</div><div class="line"><span class="keyword">return</span> t</div></pre></td></tr></table></figure>
<h3 id="æ ¸å¿ƒæ¨¡å—-ç”¨ç®€å•çš„æ­£åˆ™æ‰¾åˆ°é¡µé¢ä¸­çš„æ‰€æœ‰å›¾ç‰‡å¹¶çˆ¬å–"><a href="#æ ¸å¿ƒæ¨¡å—-ç”¨ç®€å•çš„æ­£åˆ™æ‰¾åˆ°é¡µé¢ä¸­çš„æ‰€æœ‰å›¾ç‰‡å¹¶çˆ¬å–" class="headerlink" title="æ ¸å¿ƒæ¨¡å—,ç”¨ç®€å•çš„æ­£åˆ™æ‰¾åˆ°é¡µé¢ä¸­çš„æ‰€æœ‰å›¾ç‰‡å¹¶çˆ¬å–"></a>æ ¸å¿ƒæ¨¡å—,ç”¨ç®€å•çš„æ­£åˆ™æ‰¾åˆ°é¡µé¢ä¸­çš„æ‰€æœ‰å›¾ç‰‡å¹¶çˆ¬å–</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">print(<span class="string">'å¼€å§‹'</span>)</div><div class="line">url = <span class="string">'http://www.douban.com/'</span></div><div class="line">webHeader = &#123;<span class="string">'User-Agent'</span>:<span class="string">'Mozilla/5.0'</span>&#125;</div><div class="line">req = urllib.request.Request(url=url, headers=webHeader)</div><div class="line">webPage = urllib.request.urlopen(req)</div><div class="line">contentBytes = webPage.read()</div><div class="line">saveFile(contentBytes)</div><div class="line"><span class="keyword">for</span> link, t <span class="keyword">in</span> set(re.findall(<span class="string">r'(http[s]?:[^\s]*?(jpg|png|gif))'</span>, str(contentBytes))):</div><div class="line">    print(link)</div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        urllib.request.urlretrieve(link, destFile(link))</div><div class="line">        print(<span class="string">'\t\tæˆåŠŸ'</span>)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        print(<span class="string">'\t\tå¤±è´¥'</span>)</div><div class="line">print(<span class="string">'ç»“æŸ'</span>)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œæˆ‘çš„æ­£åˆ™å¾ˆç®€å•,[^\s]ä¹Ÿå°±æ˜¯éç©ºæ ¼å­—ç¬¦åº”è¯¥ç›´æ¥ç”¨\S,æˆ‘ä¸€å¼€å§‹å†™çš„æ˜¯httpâ€¦ä»€ä¹ˆéƒ½çˆ¬ä¸ä¸‹æ¥ã€‚åæ¥çœ‹äº†é¡µé¢ä»£ç å‘ç°è±†ç“£ä¸»é¡µå›¾ç‰‡æ˜¯ä½¿ç”¨httpsçš„ã€‚äºæ˜¯æ”¹æ­£,é¡ºåˆ©å®Œæˆï¼<br>è¿™æ˜¯åœ¨æ²¡æœ‰é‡åˆ°é˜»æ‹¦çš„æƒ…å†µä¸‹çˆ¬ä¸€ç‚¹æ•°æ®,çˆ¬è™«è™½ç„¶æ˜¯ä¸ªå°è¯¾é¢˜,ä½†æ˜¯æ·±å…¥å‘æ˜è¿˜æ˜¯ä¼šæœ‰çˆ¬è™«å’Œåçˆ¬è™«çš„çŸ›ç›¾å¯¹æŠ—,å„ç§æ¡†æ¶çš„å¥‡å¦™æ€è·¯ã€‚åƒé‡Œä¹‹è¡Œ,å§‹äºè¶³ä¸‹ã€‚æ™šå®‰ï¼</p>

 
                <!-- Meta -->
                <div class="post-meta">
                    <hr>
                    <br>
                    <div class="post-tags">
                        
                            

<a href="/tag/python/">#python</a>


                        
                    </div>
                    <div class="post-date">
                        2016 å¹´ 04 æœˆ 16 æ—¥
                    </div>
                </div>
            </div>

            <!-- Comments -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- Disqus Comments -->


            </div>
        </div>
    </div>
</article>
</section>

    <!-- Scripts -->
    <!-- jQuery -->
<script src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script type="text/javascript">
	console.log('Hexo-theme-hollow designed by zchen9 ğŸ™‹ Â© 2015-' + (new Date()).getFullYear());
</script>

    <!-- Google Analytics -->
    

</body>

</html>